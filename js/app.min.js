function isWebp() {
  var e, t;
  (e = function (e) {
    1 == e
      ? document.querySelector("body").classList.add("webp")
      : document.querySelector("body").classList.add("no-webp");
  }),
    ((t = new Image()).onload = t.onerror =
      function () {
        e(2 == t.height);
      }),
    (t.src =
      "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA");
}
function headerHandler() {
  const e = document.querySelector(".header");
  e && (a(), window.addEventListener("scroll", a));
  const t = document.querySelector(".header__burger");
  if (t) {
    const e = document.querySelector(".header__middle");
    t.addEventListener("click", () => {
      t.classList.toggle("_active"),
        e.classList.toggle("_active"),
        document.body.classList.toggle("_lock");
    });
  }
  function a() {
    window.scrollY > 0
      ? e.classList.add("_scroll")
      : e.classList.remove("_scroll");
  }
}
function anchorLinks() {
  const e = document.querySelectorAll("a._anchor-scroll"),
    t = document.querySelector(".header"),
    a = document.querySelector(".header__burger"),
    s = document.querySelector(".header__middle");
  for (let t = 0; t < e.length; t++) {
    const i = e[t];
    i.addEventListener("click", (e) => {
      e.preventDefault();
      const t = i.getAttribute("href").replace("#", ""),
        c = document.getElementById(t).getBoundingClientRect().top - n();
      a.classList.remove("_active"),
        s.classList.remove("_active"),
        document.body.classList.remove("_lock"),
        window.scrollBy({ top: c, behavior: "smooth" });
    });
  }
  function n() {
    return window.innerWidth <= 991.98 || t.classList.contains("_scroll")
      ? t.clientHeight
      : t.clientHeight - 67;
  }
}
function lazyloading() {
  const e = document.querySelectorAll("img[data-src], source[data-srcset]"),
    t = document.documentElement.clientHeight;
  let a = [];
  function s() {
    let s = a.findIndex((e) => pageYOffset > e - t);
    s >= 0 &&
      (e[s].dataset.src
        ? ((e[s].src = e[s].dataset.src), e[s].removeAttribute("data-src"))
        : e[s].dataset.srcset &&
          ((e[s].srcset = e[s].dataset.srcset),
          e[s].removeAttribute("data-srcset")),
      e[s].classList.add("_lazy-loaded"),
      delete a[s]);
  }
  e.length > 0 &&
    e.forEach((e) => {
      (e.dataset.src || e.dataset.srcset) &&
        ((e.style.opacity = "0"),
        a.push(e.getBoundingClientRect().top + pageYOffset),
        s());
    }),
    window.addEventListener("scroll", function () {
      document.querySelectorAll("img[data-src], source[data-srcset]").length >
        0 && s();
    });
}
class DynamicAdapt {
  constructor(e) {
    this.type = e;
  }
  init() {
    (this.оbjects = []),
      (this.daClassname = "_dynamic_adapt_"),
      (this.nodes = [...document.querySelectorAll("[data-da]")]),
      this.nodes.forEach((e) => {
        const t = e.dataset.da.trim().split(","),
          a = {};
        (a.element = e),
          (a.parent = e.parentNode),
          (a.destination = document.querySelector(`${t[0].trim()}`)),
          (a.breakpoint = t[1] ? t[1].trim() : "767"),
          (a.place = t[2] ? t[2].trim() : "last"),
          (a.index = this.indexInParent(a.parent, a.element)),
          this.оbjects.push(a);
      }),
      this.arraySort(this.оbjects),
      (this.mediaQueries = this.оbjects
        .map(({ breakpoint: e }) => `(${this.type}-width: ${e}px),${e}`)
        .filter((e, t, a) => a.indexOf(e) === t)),
      this.mediaQueries.forEach((e) => {
        const t = e.split(","),
          a = window.matchMedia(t[0]),
          s = t[1],
          n = this.оbjects.filter(({ breakpoint: e }) => e === s);
        a.addEventListener("change", () => {
          this.mediaHandler(a, n);
        }),
          this.mediaHandler(a, n);
      });
  }
  mediaHandler(e, t) {
    e.matches
      ? t.forEach((e) => {
          (e.index = this.indexInParent(e.parent, e.element)),
            this.moveTo(e.place, e.element, e.destination);
        })
      : t.forEach(({ parent: e, element: t, index: a }) => {
          t.classList.contains(this.daClassname) && this.moveBack(e, t, a);
        });
  }
  moveTo(e, t, a) {
    t.classList.add(this.daClassname),
      "last" === e || e >= a.children.length
        ? a.append(t)
        : "first" !== e
        ? a.children[e].before(t)
        : a.prepend(t);
  }
  moveBack(e, t, a) {
    t.classList.remove(this.daClassname),
      void 0 !== e.children[a] ? e.children[a].before(t) : e.append(t);
  }
  indexInParent(e, t) {
    return [...e.children].indexOf(t);
  }
  arraySort(e) {
    "min" === this.type
      ? e.sort((e, t) =>
          e.breakpoint === t.breakpoint
            ? e.place === t.place
              ? 0
              : "first" === e.place || "last" === t.place
              ? -1
              : "last" === e.place || "first" === t.place
              ? 1
              : e.place - t.place
            : e.breakpoint - t.breakpoint
        )
      : e.sort((e, t) =>
          e.breakpoint === t.breakpoint
            ? e.place === t.place
              ? 0
              : "first" === e.place || "last" === t.place
              ? 1
              : "last" === e.place || "first" === t.place
              ? -1
              : t.place - e.place
            : t.breakpoint - e.breakpoint
        );
  }
}
lazyloading(), headerHandler(), isWebp(), anchorLinks();
const da = new DynamicAdapt("max");
da.init();
